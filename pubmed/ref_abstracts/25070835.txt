This paper will explore in detail the effects of context and group dynamics on the development of a multi-level community-based HIV prevention intervention for crack cocaine users in the San Salvador Metropolitan Area, El Salvador. Community partners included residents from marginal communities, service providers from the historic center of San Salvador and research staff from a non-profit organization. The community contexts from which partners came varied considerably and affected structural group dynamics, i.e. who was identified as community partners, their research and organizational capacity, and their ability to represent their communities, with participants from marginal communities most likely to hold community leadership positions and be residents, and those from the center of San Salvador most likely to work in religious organizations dedicated to HIV prevention or feeding indigent drug users. These differences also affected the intervention priorities of different partners. The context of communities changed over time, particularly levels of violence, and affected group dynamics and the intervention developed. Finally, strategies were needed to elicit input from stakeholders under-represented in the community advisory board, in particular active crack users, in order to check the feasibility of the proposed intervention and revise it as necessary. Because El Salvador is a very different context than that in which most CBPR studies have been conducted, our results reveal important contextual factors and their effects on partnerships not often considered in the literature.